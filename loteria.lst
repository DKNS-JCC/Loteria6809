ASxxxx Assembler V05.00  (Motorola 6809), page 1.
Hexidecimal [16-Bits]



                              1             .module loteria6809
                              2             .area PROG (ABS )
   0100                       3             .org 0x100
                              4             .globl programa
                              5          			; Inicio definicion de constantes
                     FF01     6 fin     	.equ 	0xFF01
                     FF02     7 teclado		.equ	0xFF02
                     FF00     8 pantalla 	.equ 	0xFF00
                              9          			; Fin definicion de constantes
                             10 
                             11 			; Inicio declaración de variables
   0100 1B 5B 33 31 6D 3D    12 menu_p:         .ascii "\33[31m=====LOTERIA 6809=====\n"
        3D 3D 3D 3D 4C 4F
        54 45 52 49 41 20
        36 38 30 39 3D 3D
        3D 3D 3D 0A
   011C 1B 5B 33 32 6D 31    13                 .ascii  "\33[32m1. DECIMOS\n"
        2E 20 44 45 43 49
        4D 4F 53 0A
   012C 1B 5B 33 33 6D 32    14                 .ascii  "\33[33m2. SORTEO\n"
        2E 20 53 4F 52 54
        45 4F 0A
   013B 1B 5B 33 34 6D 33    15                 .ascii  "\33[34m3. COMPROBAR\n"
        2E 20 43 4F 4D 50
        52 4F 42 41 52 0A
   014D 1B 5B 33 35 6D 34    16                 .asciz  "\33[35m4. SALIR\n"
        2E 20 53 41 4C 49
        52 0A 00
                             17 
                             18 
   015C 1B 5B 33 32 6D 3D    19 m_decimos:      .ascii  "\33[32m=========DECIMOS==========\n"
        3D 3D 3D 3D 3D 3D
        3D 3D 44 45 43 49
        4D 4F 53 3D 3D 3D
        3D 3D 3D 3D 3D 3D
        3D 0A
   017C 1B 5B 33 33 6D 31    20                 .ascii  "\33[33m1. Ver\n"
        2E 20 56 65 72 0A
   0188 1B 5B 33 34 6D 32    21                 .ascii  "\33[34m2. Introducir resultados\n"
        2E 20 49 6E 74 72
        6F 64 75 63 69 72
        20 72 65 73 75 6C
        74 61 64 6F 73 0A
   01A6 1B 5B 33 35 6D 33    22                 .asciz  "\33[35m3. Volver\n"
        2E 20 56 6F 6C 76
        65 72 0A 00
                             23 
                             24 
   01B6 1B 5B 33 33 6D 3D    25 m_sorteo:       .ascii  "\33[33m=========SORTEO==========\n"
        3D 3D 3D 3D 3D 3D
        3D 3D 53 4F 52 54
        45 4F 3D 3D 3D 3D
        3D 3D 3D 3D 3D 3D
        0A
   01D5 1B 5B 33 34 6D 31    26                 .ascii  "\33[34m1. Ver Resultados\n"
ASxxxx Assembler V05.00  (Motorola 6809), page 2.
Hexidecimal [16-Bits]



        2E 20 56 65 72 20
        52 65 73 75 6C 74
        61 64 6F 73 0A
   01EC 1B 5B 33 35 6D 32    27                 .ascii  "\33[35m2. Introducir Resultados\n"
        2E 20 49 6E 74 72
        6F 64 75 63 69 72
        20 52 65 73 75 6C
        74 61 64 6F 73 0A
   020A 1B 5B 33 36 6D 33    28                 .asciz  "\33[36m3. Volver\n"
        2E 20 56 6F 6C 76
        65 72 0A 00
                             29 
   021A 1B 5B 33 35 6D 3D    30 m_sorteo2:     .ascii  "\33[35m=========INTRODUCIR RESULTADOS==========\n"
        3D 3D 3D 3D 3D 3D
        3D 3D 49 4E 54 52
        4F 44 55 43 49 52
        20 52 45 53 55 4C
        54 41 44 4F 53 3D
        3D 3D 3D 3D 3D 3D
        3D 3D 3D 0A
   0248 1B 5B 33 31 6D 31    31                 .ascii  "\33[31m1. 3 Primeros premios\n"
        2E 20 33 20 50 72
        69 6D 65 72 6F 73
        20 70 72 65 6D 69
        6F 73 0A
   0263 1B 5B 33 32 6D 32    32                 .ascii  "\33[32m2. Terminaciones 4 cifras\n"
        2E 20 54 65 72 6D
        69 6E 61 63 69 6F
        6E 65 73 20 34 20
        63 69 66 72 61 73
        0A
   0282 1B 5B 33 33 6D 33    33                 .ascii  "\33[33m3. Terminaciones 3 cifras\n"
        2E 20 54 65 72 6D
        69 6E 61 63 69 6F
        6E 65 73 20 33 20
        63 69 66 72 61 73
        0A
   02A1 1B 5B 33 34 6D 34    34                 .ascii  "\33[34m4. Terminaciones 2 cifras\n"
        2E 20 54 65 72 6D
        69 6E 61 63 69 6F
        6E 65 73 20 32 20
        63 69 66 72 61 73
        0A
   02C0 1B 5B 33 35 6D 35    35                 .ascii  "\33[35m5. Reintegros\n"
        2E 20 52 65 69 6E
        74 65 67 72 6F 73
        0A
   02D3 1B 5B 33 36 6D 36    36                 .asciz  "\33[36m6. Volver\n"
        2E 20 56 6F 6C 76
        65 72 0A 00
                             37 
                             38 
   02E3 19 5B 33 34 6D 3D    39 m_comprobar:      .asciz  "\31[34m=========COMPROBAR==========\n"
        3D 3D 3D 3D 3D 3D
        3D 3D 43 4F 4D 50
ASxxxx Assembler V05.00  (Motorola 6809), page 3.
Hexidecimal [16-Bits]



        52 4F 42 41 52 3D
        3D 3D 3D 3D 3D 3D
        3D 3D 3D 0A 00
                             40 
   0306 4F 70 63 69 6F 6E    41 error_switch:     .asciz  "Opcion incorrecta, intentelo de nuevo.\n"
        20 69 6E 63 6F 72
        72 65 63 74 61 2C
        20 69 6E 74 65 6E
        74 65 6C 6F 20 64
        65 20 6E 75 65 76
        6F 2E 0A 00
   032E 1B 5B 32 4A 00       42 limpia_pantalla:  .asciz  "\033[2J"
                             43 			; Fin declaración de variables
                             44 	        	
                             45 			; Comienzo del programa
   0333                      46 programa:
                             47 
   0333 8E 01 00      [ 3]   48     ldx #menu_p
   0336 17 00 BF      [ 9]   49     lbsr imprime_cadena
   0339 B6 FF 02      [ 5]   50     lda teclado
   033C 8E 03 2E      [ 3]   51     ldx #limpia_pantalla
   033F 17 00 B6      [ 9]   52     lbsr imprime_cadena 
   0342 81 31         [ 2]   53     cmpa #'1 ; 1. Decimos
   0344 27 22         [ 3]   54     beq decimos; Si es 1, va a decimos
   0346 81 32         [ 2]   55     cmpa #'2 ; 2. Sorteo
   0348 27 48         [ 3]   56     beq sorteo; Si es 2, va a sorteo
   034A 81 33         [ 2]   57     cmpa #'3 ; 3. Comprobar
   034C 27 11         [ 3]   58     beq comprobar ; Si es 3, va a comprobar
   034E 81 34         [ 2]   59     cmpa #'4 ; 4. Salir
   0350 27 09         [ 3]   60     beq acabar  ; Si es 4, va a salir
                             61 
   0352                      62 mensaje_error:
   0352 8E 03 06      [ 3]   63     ldx #error_switch
   0355 17 00 A0      [ 9]   64     lbsr imprime_cadena
   0358 7E 03 33      [ 4]   65     jmp programa
                             66 
   035B 4F            [ 2]   67 acabar: 	clra
   035C B7 FF 01      [ 5]   68 	sta 	fin
                             69 
   035F                      70 comprobar:     
   035F 8E 02 E3      [ 3]   71     ldx #m_comprobar
   0362 17 00 93      [ 9]   72     lbsr imprime_cadena
   0365 7E 03 5B      [ 4]   73     jmp acabar
                             74 
   0368                      75 decimos:
   0368 8E 01 5C      [ 3]   76     ldx #m_decimos
   036B 17 00 8A      [ 9]   77     lbsr imprime_cadena
   036E B6 FF 02      [ 5]   78     lda teclado
   0371 8E 03 2E      [ 3]   79     ldx #limpia_pantalla
   0374 17 00 81      [ 9]   80     lbsr imprime_cadena 
   0377 81 31         [ 2]   81     cmpa #'1 ; 1. Ver
   0379 27 11         [ 3]   82     beq decimos_ver; Si es 1, va a decimos_ver
   037B 81 32         [ 2]   83     cmpa #'2 ; 2. Introducir resultados
   037D 27 10         [ 3]   84     beq decimos_introducir; Si es 2, va a decimos_introducir
   037F 81 33         [ 2]   85     cmpa #'3 ; 3. Volver
ASxxxx Assembler V05.00  (Motorola 6809), page 4.
Hexidecimal [16-Bits]



   0381 27 B0         [ 3]   86     beq programa    ; Si es 3, vuelve al menu principal
   0383 8E 03 06      [ 3]   87     ldx #error_switch
   0386 17 00 6F      [ 9]   88     lbsr imprime_cadena
   0389 7E 03 68      [ 4]   89     jmp decimos
                             90 
   038C                      91 decimos_ver:
                             92     ;;llamar a la funcion que imprime los decimos
   038C 7E 03 5B      [ 4]   93     jmp acabar
                             94 
   038F                      95 decimos_introducir:
                             96     ;;llamar a la funcion que introduce los decimos
   038F 7E 03 5B      [ 4]   97     jmp acabar
   0392                      98 sorteo:
   0392 8E 01 B6      [ 3]   99     ldx #m_sorteo
   0395 17 00 60      [ 9]  100     lbsr imprime_cadena
   0398 B6 FF 02      [ 5]  101     lda teclado
   039B 8E 03 2E      [ 3]  102     ldx #limpia_pantalla
   039E 17 00 57      [ 9]  103     lbsr imprime_cadena 
   03A1 81 31         [ 2]  104     cmpa #'1 ; 1. Ver resultados
   03A3 27 11         [ 3]  105     beq sorteo_ver; Si es 1, va a sorteo_ver
   03A5 81 32         [ 2]  106     cmpa #'2 ; 2. Introducir resultados
   03A7 27 10         [ 3]  107     beq sorteo_introducir; Si es 2, va a sorteo_introducir
   03A9 81 33         [ 2]  108     cmpa #'3 ; 3. Volver
   03AB 27 86         [ 3]  109     beq programa    ; Si es 3, vuelve al menu principal
   03AD 8E 03 06      [ 3]  110     ldx #error_switch
   03B0 17 00 45      [ 9]  111     lbsr imprime_cadena
   03B3 7E 03 92      [ 4]  112     jmp sorteo
                            113 
   03B6                     114 sorteo_ver:
                            115     ;;llamar a la funcion que imprime los resultados
   03B6 7E 03 5B      [ 4]  116     jmp acabar
                            117 
   03B9                     118 sorteo_introducir:
   03B9 8E 02 1A      [ 3]  119     ldx #m_sorteo2
   03BC 17 00 39      [ 9]  120     lbsr imprime_cadena
   03BF B6 FF 02      [ 5]  121     lda teclado
   03C2 8E 03 2E      [ 3]  122     ldx #limpia_pantalla
   03C5 17 00 30      [ 9]  123     lbsr imprime_cadena 
   03C8 81 31         [ 2]  124     cmpa #'1 ; 1. 3 primeros premios
   03CA 27 1D         [ 3]  125     beq sorteo_introducir_3premios; Si es 1, va a sorteo_introducir_3premios
   03CC 81 32         [ 2]  126     cmpa #'2 ; 2. Terminaciones 4 cifras
   03CE 27 1C         [ 3]  127     beq sorteo_introducir_4cifras; Si es 2, va a sorteo_introducir_2
   03D0 81 33         [ 2]  128     cmpa #'3 ; 3. Terminaciones 3 cifras
   03D2 27 1B         [ 3]  129     beq sorteo_introducir_3cifras; Si es 3, va a sorteo_introducir_3
   03D4 81 34         [ 2]  130     cmpa #'4 ; 4. Terminaciones 2 cifras
   03D6 27 1A         [ 3]  131     beq sorteo_introducir_2cifras; Si es 4, va a sorteo_introducir_4
   03D8 81 35         [ 2]  132     cmpa #'5 ; 5. Reintegros
   03DA 27 19         [ 3]  133     beq sorteo_introducir_reintegros; Si es 5, va a sorteo_introducir_5
   03DC 81 36         [ 2]  134     cmpa #'6 ; 6. Volver
   03DE 27 B2         [ 3]  135     beq sorteo;    ; Si es 6, vuelve al menu principal
   03E0 8E 03 06      [ 3]  136     ldx #error_switch
   03E3 17 00 12      [ 9]  137     lbsr imprime_cadena 
   03E6 7E 03 B9      [ 4]  138     jmp sorteo_introducir
                            139 
   03E9                     140 sorteo_introducir_3premios:
ASxxxx Assembler V05.00  (Motorola 6809), page 5.
Hexidecimal [16-Bits]



                            141     ;;llamar a la funcion que introduce los 3 premios
   03E9 7E 03 5B      [ 4]  142     jmp acabar
                            143 
   03EC                     144 sorteo_introducir_4cifras:
                            145     ;;llamar a la funcion que introduce las terminaciones de 4 cifras
   03EC 7E 03 5B      [ 4]  146     jmp acabar
                            147 
   03EF                     148 sorteo_introducir_3cifras:
                            149     ;;llamar a la funcion que introduce las terminaciones de 3 cifras
   03EF 7E 03 5B      [ 4]  150     jmp acabar
                            151 
   03F2                     152 sorteo_introducir_2cifras:
                            153     ;;llamar a la funcion que introduce las terminaciones de 2 cifras
   03F2 7E 03 5B      [ 4]  154     jmp acabar
                            155 
   03F5                     156 sorteo_introducir_reintegros:
                            157     ;;llamar a la funcion que introduce los reintegros
   03F5 7E 03 5B      [ 4]  158     jmp acabar
                            159 
                            160 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                            161 ; imprime_cadena                                                   ;
                            162 ; saca por la pantalla la cadena acabada en '\0 apuntada por X     ;
                            163 ;                                                                  ;       
                            164 ; Entrada: X-direcciOn de comienzo de la cadena                    ;
                            165 ; Salida: ninguna                                                  ;   
                            166 ; Registros afectados: X, CC.                                      ;
                            167 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                            168 
   03F8                     169 imprime_cadena:
   03F8 34 02         [ 6]  170         pshs    a               ; Guarda el valor de A en la pila
   03FA                     171 sgte:              
   03FA A6 80         [ 6]  172         lda     ,x+             ; Carga el primer caracter de la cadena
   03FC 27 06         [ 3]  173         beq ret_imprime_cadena  ; Si es 0, sale a ret_imprime_cadena
   03FE B7 FF 00      [ 5]  174         sta     pantalla        ; Si no, lo imprime en pantalla
   0401 7E 03 FA      [ 4]  175         jmp     sgte            ; y vuelve a sgte
   0404                     176 ret_imprime_cadena:
   0404 35 02         [ 6]  177         puls    a               ; Recupera el valor de A
   0406 39            [ 5]  178         rts                     ; y sale de la subrutina equivalente a puls pc (return)
                            179 
                            180 
                            181 
   FFFE                     182 	.org 	0xFFFE	; Vector de RESET
   FFFE 03 33               183 	.word 	programa
ASxxxx Assembler V05.00  (Motorola 6809), page 6.
Hexidecimal [16-Bits]

Symbol Table

    .__.$$$.       =   2710 L   |     .__.ABS.       =   0000 G
    .__.CPU.       =   0000 L   |     .__.H$L.       =   0001 L
  2 acabar             035B R   |   2 comprobar          035F R
  2 decimos            0368 R   |   2 decimos_introd     038F R
  2 decimos_ver        038C R   |   2 error_switch       0306 R
    fin            =   FF01     |   2 imprime_cadena     03F8 R
  2 limpia_pantall     032E R   |   2 m_comprobar        02E3 R
  2 m_decimos          015C R   |   2 m_sorteo           01B6 R
  2 m_sorteo2          021A R   |   2 mensaje_error      0352 R
  2 menu_p             0100 R   |     pantalla       =   FF00 
  2 programa           0333 GR  |   2 ret_imprime_ca     0404 R
  2 sgte               03FA R   |   2 sorteo             0392 R
  2 sorteo_introdu     03B9 R   |   2 sorteo_introdu     03F2 R
  2 sorteo_introdu     03EF R   |   2 sorteo_introdu     03E9 R
  2 sorteo_introdu     03EC R   |   2 sorteo_introdu     03F5 R
  2 sorteo_ver         03B6 R   |     teclado        =   FF02 

ASxxxx Assembler V05.00  (Motorola 6809), page 7.
Hexidecimal [16-Bits]

Area Table

[_CSEG]
   0 _CODE            size    0   flags C080
   2 PROG             size    0   flags  908
[_DSEG]
   1 _DATA            size    0   flags C0C0

